<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DEOS Quiz Battle</title>
    <!-- Pixel Font -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="quiz.css">
</head>

<body>
    <audio id="bg-music" src="/public/şarkı.mp3" loop autoplay></audio>
    <div id="gameboy-wrapper">
        <div class="gameboy-top">
            <div class="line"></div>
            <div class="line"></div>
        </div>

        <div id="gameboy-screen-bezel">
            <div class="screen-header">
                <div class="battery-light"></div>
                <span class="battery-text">BATTERY</span>
            </div>

            <div id="game-container">
                <!-- Battle Scene -->
                <div id="battle-scene">
                    <!-- Enemy Status -->
                    <div id="enemy-status" class="status-box">
                        <div class="name-level">
                            <span class="name">DEOS CAR</span>
                            <span class="level">Lv99</span>
                        </div>
                        <div class="hp-bar-container">
                            <span class="hp-label">HP</span>
                            <div class="hp-bar-track">
                                <div id="enemy-hp-fill" class="hp-bar-fill"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Enemy Sprite -->
                    <div id="enemy-sprite-container">
                        <img id="enemy-sprite" src="/public/DEOS CAR NORMAL.png" alt="Deos Car">
                    </div>

                    <!-- Player Sprite -->
                    <div id="player-sprite-container">
                        <img id="player-sprite" src="/public/anakarakter.png" alt="Player">
                    </div>

                    <!-- Player Status -->
                    <div id="player-status" class="status-box">
                        <div class="name-level">
                            <span class="name">OYUNCU</span>
                            <span class="level">Lv50</span>
                        </div>
                        <div class="hp-bar-container">
                            <span class="hp-label">HP</span>
                            <div class="hp-bar-track">
                                <div id="player-hp-fill" class="hp-bar-fill" style="width: 100%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dialogue Box -->
                <div id="dialogue-box">
                    <div id="dialogue-text">
                        Vahşi DEOS CAR belirdi!
                    </div>
                    <div id="options-grid" style="display: none;">
                        <button class="option-btn" onclick="selectAnswer(0)" id="btn-0">A) Seçenek</button>
                        <button class="option-btn" onclick="selectAnswer(1)" id="btn-1">B) Seçenek</button>
                        <button class="option-btn" onclick="selectAnswer(2)" id="btn-2">C) Seçenek</button>
                        <button class="option-btn" onclick="selectAnswer(3)" id="btn-3">D) Seçenek</button>
                    </div>
                </div>
            </div>

            <div class="screen-brand">DEOS BOY</div>
        </div>

        <div class="gameboy-controls">
            <div class="d-pad"></div>
            <div class="action-buttons-diamond">
                <div class="play-btn btn-top btn-color-a" onclick="document.getElementById('btn-0').click()">A</div>
                <div class="play-btn btn-left btn-color-b" onclick="document.getElementById('btn-1').click()">B</div>
                <div class="play-btn btn-right btn-color-c" onclick="document.getElementById('btn-2').click()">C</div>
                <div class="play-btn btn-bottom btn-color-d" onclick="document.getElementById('btn-3').click()">D</div>
            </div>
        </div>
    </div>

    <script>
        // Ses dosyası tetikleyicisi
        document.body.addEventListener('click', () => {
            const bgm = document.getElementById('bg-music');
            if (bgm && bgm.paused) {
                bgm.volume = 0.7;
                bgm.play().catch(e => console.log('Autoplay engellendi:', e));
            }
        }, { once: true });

        // Responsive Dikey Ekran Ölçekleme (iOS & Android tam uyum için)
        function resizeGameboy() {
            const wrapper = document.getElementById('gameboy-wrapper');
            if (!wrapper) return;
            const targetWidth = window.innerWidth * 0.90;
            const targetHeight = window.innerHeight * 0.95;
            const baseWidth = 870;
            const baseHeight = 1100;

            let scaleX = targetWidth / baseWidth;
            let scaleY = targetHeight / baseHeight;
            let scale = Math.min(scaleX, scaleY);

            if (scale > 1) scale = 1; // Sadece kucultmek maksadi

            wrapper.style.transform = `scale(${scale})`;
        }

        window.addEventListener('resize', resizeGameboy);
        window.addEventListener('load', resizeGameboy);
        resizeGameboy(); // Baslangicta cagir
    </script>

    <script src="quiz.js"></script>
</body>

</html>